以下是整理后的【团子技能对照表】【技能效果】【比赛规则】说明，适合作为项目说明文档、`README.md` 或设计书一部分。



## 🧋 团子与技能对应

| 团子名 | 技能名        |
| - | - |
| 今汐  | **令尹之名**   |
| 守岸人 | **收束的未来**  |
| 长离  | **谋而后定**   |
| 卡卡罗 | **如影随形**   |
| 椿   | **一个人的狂欢** |
| 柯莱塔 | **润润加倍**   |



## 🧠 技能说明

| 技能名        | 技能效果                                                   |
| - | - |
| **收束的未来**  | 掷骰子时结果固定为 **2 或 3**（等概率）                               |
| **令尹之名**   | 如果自己在格子堆叠的**下方**，有 **40% 概率**直接移动到当前格子**栈顶**（不前进）      |
| **谋而后定**   | 如果自己在格子堆叠的**下方**，则下个回合有 **65% 概率**被**延迟出手**            |
| **如影随形**   | 如果自己是全场**最后一名**，则该回合**额外前进 3 格**                       |
| **一个人的狂欢** | 有 **50% 概率**触发：当前格子除自己外每有 1 个团子，就**多前进 1 格**（不会带走其他团子） |
| **润润加倍**   | 有 **28% 概率**使掷出的步数**翻倍**（即前进两倍步数）                      |



## 🎮 游戏规则

1. **角色数量**：共 6 个团子
2. **地图长度**：24 格
3. **胜利条件**：最先抵达终点的团子获胜。若同一格上多个团子，**最上方的团子胜出**
4. **游戏轮次流程**：

   * 每回合掷骰决定出手顺序（随机）
   * 每回合依序执行技能 → 掷骰 → 加成 → 移动
5. **掷骰规则**：除技能外，掷骰为 1～3
6. **叠加与移动**：

   * 同一格可存在多个团子（堆叠）
   * **下方团子会带上方团子前进**

## 10000次模拟

```log
[02:25:01] INFO - ---  游戏开始【9999/10000】 ---
[02:25:01] INFO - ---  游戏开始【10000/10000】 ---
卡卡罗: 1558 次胜利, 胜率: 15.58%
柯莱塔: 2271 次胜利, 胜率: 22.71%
椿: 1605 次胜利, 胜率: 16.05%
今汐: 1498 次胜利, 胜率: 14.98%
长离: 1100 次胜利, 胜率: 11.00%
守岸人: 1968 次胜利, 胜率: 19.68%
```


# 项目结构整理

## ✅ 项目结构总览

```
tuanzi/
├── board.py               ← 棋盘类：管理格子、堆叠、团子移动
├── dango.py               ← 团子类：记录位置、技能、堆叠索引等状态
├── skill_base.py          ← 技能基类（接口）
├── skills_impl.py         ← 技能实现类（6种技能逻辑）
├── simulator.py           ← 主程序入口：执行1000次模拟，输出日志和统计图
├── plot_result.py         ← 绘图模块：输出胜率统计图（.png）
├── logger_util.py         ← 日志模块：同时输出到控制台和 logs 文件夹
├── logs/
│   ├── dango_simulation.log  ← 运行日志输出（自动生成）
│   └── dango_result_chart.png← 胜率图输出（自动生成）
└── .gitignore             ← Git 忽略配置
```



## ✅ 各文件功能说明

| 文件名              | 功能描述                                |
| - | -- |
| `board.py`       | 提供棋盘类 `Board`，用于存储每一格的团子堆叠信息和移动操作逻辑 |
| `dango.py`       | 定义 `Dango` 类，包含位置、堆叠索引、技能接口调用等      |
| `skill_base.py`  | 技能基类接口，定义了技能生命周期中的 4 个方法            |
| `skills_impl.py` | 每种技能类实现：如收束的未来、令尹之名等，继承自 `Skill`    |
| `simulator.py`   | 主程序，控制每轮流程、调用技能、输出胜者、记录日志和图表        |
| `plot_result.py` | 用 `matplotlib` 输出胜率柱状图，保存为 PNG 文件   |
| `logger_util.py` | 设置日志记录器，输出到控制台和文件                   |
| `logs/`          | 自动生成的日志和图表目录（由程序自动创建）               |
| `.gitignore`     | Git 忽略规则配置文件                        |



## ✅ 推荐 .gitignore 内容

```gitignore
# Python 相关
__pycache__/
*.pyc

# VSCode 或 PyCharm 配置
.vscode/
.idea/

# 日志和图表
logs/
*.log
*.png

# 临时运行数据
*.zip
*.tmp
.DS_Store
```



## ✅ 项目运行方式

1. 安装依赖：

   ```bash
   pip install matplotlib
   ```

2. 运行模拟主程序：

   ```bash
   python simulator.py
   ```

3. 结果查看：

   * 胜率图表：`logs/dango_result_chart.png`
   * 日志记录：`logs/dango_simulation.log`

